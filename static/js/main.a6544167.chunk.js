(this["webpackJsonpts-app"]=this["webpackJsonpts-app"]||[]).push([[0],{237:function(e,t,n){},243:function(e,t){},244:function(e,t){},252:function(e,t){},267:function(e,t,n){"use strict";n.r(t);var r=n(50),c=n.n(r),o=n(210),i=n.n(o),s=(n(237),n(7)),u=n.n(s),a=n(11),l=n(6),d=(n(265),n(211)),b=n(150),f=n.n(b),j=n(30),h=function(){var e=Object(r.useState)(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!0),i=Object(l.a)(o,2),s=i[0],b=i[1],h=Object(r.useState)("environment"),g=Object(l.a)(h,2),x=g[0],v=g[1],O=Object(r.useRef)(null),p=Object(r.useRef)(null),m=function(){var e=Object(a.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.load();case 2:t=e.sent,console.log("model loaded."),setInterval((function(){k(t)}),10),k(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(a.a)(u.a.mark((function e(t){var n,r,c,o,i,s,a,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O.current||!p.current){e.next=23;break}if(console.log("webcam and canvas are ready."),4!==(n=O.current).video.readyState){e.next=23;break}return console.log("webcam current ready state is 4."),r=n.video,c=n.video.videoWidth,o=n.video.videoHeight,p.current.width=c,p.current.height=o,console.log("detect start."),e.next=13,t.detect(r);case 13:i=e.sent,console.log("detect end."),i.length&&console.log(i),console.log("draw."),s=0,null===(a=p.current.getContext("2d"))||void 0===a||a.clearRect(0,0,c,o),i.forEach((function(e){if("person"===e.class&&e.score>=.5){s++;var t=e.bbox;null===a||void 0===a||a.strokeRect(t[0],t[1],t[2],t[3])}})),l=new Date,null===a||void 0===a||a.fillText(l.getFullYear()+"/"+(l.getMonth()+1)+"/"+l.getDate()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+" count: "+s,0,10);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){m()}),[]),Object(j.jsxs)("div",{children:[n||Object(j.jsx)("button",{onClick:function(){return c(!0)},children:"start"}),n&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("button",{onClick:function(){return c(!1)},children:"end"}),"user"===x&&Object(j.jsx)("button",{onClick:function(){return v("environment")},children:"environment"}),"environment"===x&&Object(j.jsx)("button",{onClick:function(){return v("user")},children:"user"})]}),s||Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){return b(!0)},children:"background on"}),Object(j.jsx)(f.a,{audio:!1,ref:O,videoConstraints:{facingMode:x},style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480,visibility:"hidden"}})]}),s&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){return b(!1)},children:"background off"}),Object(j.jsx)(f.a,{audio:!1,ref:O,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480}})]}),Object(j.jsx)("canvas",{ref:p,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480,border:"1px solid"}})]})]})},g=function(){return Object(j.jsx)("div",{children:Object(j.jsx)(h,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,268)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))};i.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(g,{})}),document.getElementById("root")),x()}},[[267,1,2]]]);
//# sourceMappingURL=main.a6544167.chunk.js.map