(this["webpackJsonpts-app"]=this["webpackJsonpts-app"]||[]).push([[0],{237:function(e,t,n){},243:function(e,t){},244:function(e,t){},252:function(e,t){},267:function(e,t,n){"use strict";n.r(t);var c=n(51),r=n.n(c),o=n(210),i=n.n(o),a=(n(237),n(7)),s=n.n(a),u=n(11),l=n(6),d=(n(265),n(211)),b=n(150),f=n.n(b),h=n(33),j=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],r=t[1],o=Object(c.useState)(!0),i=Object(l.a)(o,2),a=i[0],b=i[1],j=Object(c.useRef)(null),g=Object(c.useRef)(null),x=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.load();case 2:t=e.sent,console.log("model loaded."),setInterval((function(){p(t)}),10),p(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(s.a.mark((function e(t){var n,c,r,o,i,a,u,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!j.current||!g.current){e.next=23;break}if(console.log("webcam and canvas are ready."),4!==(n=j.current).video.readyState){e.next=23;break}return console.log("webcam current ready state is 4."),c=n.video,r=n.video.videoWidth,o=n.video.videoHeight,g.current.width=r,g.current.height=o,console.log("detect start."),e.next=13,t.detect(c);case 13:i=e.sent,console.log("detect end."),i.length&&console.log(i),console.log("draw."),a=0,null===(u=g.current.getContext("2d"))||void 0===u||u.clearRect(0,0,r,o),i.forEach((function(e){if("person"===e.class&&e.score>=.5){a++;var t=e.bbox;null===u||void 0===u||u.strokeRect(t[0],t[1],t[2],t[3])}})),l=new Date,null===u||void 0===u||u.fillText(l.getFullYear()+"/"+(l.getMonth()+1)+"/"+l.getDate()+" "+l.getHours()+":"+l.getMinutes()+":"+l.getSeconds()+" count: "+a,0,10);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){x()}),[]),Object(h.jsxs)("div",{children:[n||Object(h.jsx)("button",{onClick:function(){return r(!0)},children:"start"}),n&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:function(){return r(!1)},children:"end"})}),a||Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return b(!0)},children:"background on"}),Object(h.jsx)(f.a,{audio:!1,ref:j,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480,visibility:"hidden"}})]}),a&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){return b(!1)},children:"background off"}),Object(h.jsx)(f.a,{audio:!1,ref:j,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480}})]}),Object(h.jsx)("canvas",{ref:g,style:{position:"absolute",margin:"auto",textAlign:"center",top:100,left:0,right:0,zIndex:9,width:640,height:480,border:"1px solid"}})]})]})},g=function(){return Object(h.jsx)("div",{children:Object(h.jsx)(j,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,268)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),o(e),i(e)}))};i.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(g,{})}),document.getElementById("root")),x()}},[[267,1,2]]]);
//# sourceMappingURL=main.db8eb1fc.chunk.js.map